<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AtomForge - FDO Compiler & Decompiler</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%236366f1'><path d='M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5'/></svg>">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <!-- Minimal App Shell -->
    <header class="topbar">
        <div class="brand">AtomForge</div>
        <nav class="mode-tabs" role="tablist" aria-label="Modes">
            <button role="tab" id="tab-compile" class="tab" data-mode="compile" aria-selected="true" aria-controls="panel-compile">Compile</button>
            <button role="tab" id="tab-decompile" class="tab" data-mode="decompile" aria-selected="false" aria-controls="panel-decompile" tabindex="-1">Decompile</button>
        </nav>
        <div class="actions">
            <div class="examples">
                <button id="examplesBtn" class="btn ghost" aria-haspopup="menu" aria-expanded="false">Examples</button>
                <menu id="examplesMenu" class="menu" role="menu" hidden>
                    <!-- populated by JS: <button role="menuitem" data-example="basic">Basic Object</button> -->
                </menu>
            </div>
            <button id="runBtn" class="btn primary"><span class="label">Run</span></button>
        </div>
    </header>

    <main class="content">
        <!-- Panels -->
        <section id="panel-compile" class="panel" role="tabpanel" aria-labelledby="tab-compile">
            <textarea id="fdoInput" class="editor" spellcheck="false" placeholder="Enter FDO source…"></textarea>
        </section>

        <section id="panel-decompile" class="panel" role="tabpanel" aria-labelledby="tab-decompile" hidden>
            <div class="decompile-inputs">
                <div class="toggle">
                    <div class="toggle-buttons">
                        <button class="toggle-btn active" data-input="hex">Hex</button>
                        <button class="toggle-btn" data-input="file">File</button>
                    </div>
                    <button id="extractFdoBtn" class="btn small" hidden>Extract FDO</button>
                </div>

                <div id="fileInputView" class="input-view" hidden>
                    <div class="drop" id="binaryDrop">
                        <span>Drop an FDO binary here or click to choose</span>
                    </div>
                    <input id="binaryFile" type="file" accept=".fdo,.str,.bin" hidden />
                    <div class="file-meta">
                        <span>Decoded: <span id="fileDecoded">0</span> bytes</span>
                        <button id="openAsHexBtn" class="btn small" hidden>Open as Hex</button>
                    </div>
                </div>

                <div id="hexInputView" class="input-view active">
                    <textarea id="hexInput" class="editor mono" spellcheck="false" placeholder="Paste hex here (e.g., 40 01 02 … or 400102…)"></textarea>
                    <div class="file-meta">
                        <span>Decoded: <span id="hexDecoded">0</span> bytes</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Content Splitter -->
        <div class="splitter h content-split" role="separator" aria-orientation="horizontal" tabindex="0" aria-label="Resize output"></div>

        <!-- Output -->
        <section class="output">
            <div class="output-tabs" role="tablist" aria-label="Output">
                <button class="tab small" data-tab="status" aria-selected="true">Status</button>
                <button class="tab small" data-tab="hex">Hex</button>
                <button class="tab small" data-tab="source">Source</button>
            </div>
            <div class="output-panels">
                <div id="out-status" class="out-panel" role="tabpanel">
                    <div id="statusLog" class="log">
                    </div>
                </div>
                <div id="out-hex" class="out-panel" role="tabpanel" hidden>
                    <div class="out-toolbar">
                        <div class="left">Binary Output (<span id="compileSize">0 bytes</span>)</div>
                        <div class="right">
                            <button id="downloadBin" class="btn small">Download</button>
                            <button id="copyHex" class="btn small">Copy Hex</button>
                        </div>
                    </div>
                    <pre id="hexView" class="viewer mono"></pre>
                </div>
                <div id="out-source" class="out-panel" role="tabpanel" hidden>
                    <div class="out-toolbar">
                        <div class="left">Source Output (<span id="decompileSize">0 chars</span>)</div>
                        <div class="right">
                            <button id="downloadTxt" class="btn small">Download</button>
                            <button id="copySource" class="btn small">Copy All</button>
                        </div>
                    </div>
                    <pre id="sourceView" class="viewer mono"></pre>
                </div>
            </div>
        </section>
    </main>

    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container" aria-live="polite" aria-label="Notifications"></div>

    <!-- Scripts -->
    <script src="/static/script.js"></script>
</body>
</html>